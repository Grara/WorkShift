- 개요 : 메신저봇R을 이용해서 원하는 날짜의 근무자를 알려주는 카카오톡 자동 응답 봇 제작
- 제작기간 : 02/01 ~ 02/02
- 사용언어 : JavaScript

# 시작
- 지인으로부터 카톡으로 채팅을 치면 근무자를 알려주는 기능을 만들어줄 수 있겠냐고 부탁을 받게 됨
- 그렇게 규모가 크지는 않을 거 같아서 알겠다고 함

# 요구사항 분석
- 하루의 근무는 총 3개의 시간대로 나뉜다. (야간, 석간, 조간)
- 근무자는 3명이다.
- 1주마다 근무시간이 로테이션형식으로 바뀐다.
- 일요일에는 모두 휴무이며, 토요일에는 석간이 휴무이다.
- 근무자와 근무패턴은 계속 고정이다.
- 즉, 아래와 같은 형태로 진행된다.

![image](https://user-images.githubusercontent.com/84609913/216977934-0c6b889a-9fcd-4e42-a04f-c058e1a1a0d4.png)

- 카카오톡 그룹 채팅에서 사용할 수 있으면 좋겠다고 함
- 입력과 출력
- "금일근무"라고 입력하면 오늘 날짜와 근무자들을 출력
- "[날짜정보8자리] 근무"라고 입력하면 해당 날짜의 근무자들 출력
  - EX) `20230204 근무`

# 설계
- 근무자와 근무시간대의 패턴이 가변적이지 않기 때문에 데이터를 따로 갱신하거나 저장할 필요는 없다.
- 기준일로부터 목표 날짜의 시간차이만 알면 어떤 로테이션의 근무인지 알아낼 수 있다.
- 매커니즘
  - 입력은 2가지 케이스로 받는다.
    - 정확히 "금일근"라고 입력했을 때
    - `\d{8} 근무` 정규식을 통과하는 경우
  - 근무 패턴 구하기
    - 두 날짜의 시간(ms) 차이를 구한다
    - 시간차이를 바탕으로 몇일 차이가 나는지 구한다
    - 일 차이를 바탕으로 몇주 차이가 나는지 구한다
    - 주의 차이를 3으로 나눈 나머지를 통해 해당 날짜가 어떤 로테이션인지 구한다.
- 메신저봇R을 이용
  - 인터넷으로 찾아보니 메신저봇R이라는 앱을 사용하는 것이 가장 적절해보였다.
  - 카카오톡 알림을 캐치해서 스크립트의 로직을 실행하고 응답을 보내주는 앱이다.
  - 스크립트는 자바스크립트를 이용해야 한다.

# 완성
- 테스트 화면

![image](https://user-images.githubusercontent.com/84609913/216982755-3dc70d03-2e7c-4a28-9909-37688b19a60c.png)

# 끝나고 느낀 점
- 위에는 안썼지만 처음에 요구사항을 잘못 이해해서 괜히 쓸데없이 스프링 서버를 이용해서 엑셀데이터를 읽는 기능같은 걸 구현하느라 하루정도 삽질을 했다.
- 다음에는 처음부터 요구사항을 제대로 파악하는데 집중해야겠다.
